<!doctype html>
<html lang="ja">

<head>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67878421-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-67878421-6');
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>青葉台旭の投稿用Markdown亜種の仕様 | はてなブログからの転記</title>
<link rel="stylesheet" type="text/css"  href="entry.css">
<link rel="icon"       type="image/png" href="./favicon.png">

</head>

<!-- ====================================================================== -->

<!-- ===== body ===== -->
<body>
<div class="base_sheet">
<div class="base_container">

<!-- ===== header ===== -->
<header>
  <div class="h1_and_button">
    <div class="button_in_header">
      <a href="p20170411_083713.html">&lt;&lt;前</a>|<a href="../index.html">上へ</a>|<a href="p20170410_112743.html">次&gt;&gt;</a>
    </div>
    <h1>はてなブログからの転記</h1>
  </div>
</header>

<!-- ========== content ========== -->
<div class="content">

<!-- ===== 記事 ===== -->
<article class="entry">

<!-- 記事タイトル -->
<h2>青葉台旭の投稿用Markdown亜種の仕様</h2>

<!-- 記事本文 -->
<div class="main_text">

<p>基本的には、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>記法に準じている。
以下に違いを書く。</p>

<h3>フロント・マターがある</h3>

<p>三種類の要素を<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>解釈対象外としてファイルの先頭に書くことが出来る。
日付、時間、タグ、である。</p>

<p>先頭に空白行があった場合、まず解釈器はそれを削除する。空白行が連続していたら、
そのすべてが無視される。<br/>
次に yyyy-mm-dd または、HH:mm または、[aaa, bbb, ccc]
という三種類の形式を、先頭から一行ずつ読みながら探す。
yyyy-mm-dd なら、その行は日付を表し、HH:mm なら時間、[aaa, bbb, ccc]
ならタグリストということになる。</p>

<p>上記三種の形式のどれでもないと判断され場合、そこでフロント・マターは終わったという事になり、
空白行を含めて、本文すなわち<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>形式の解釈に移る。</p>

<h3>記事本文の最初の行は、暗黙のうちに記事タイトルとして解釈される</h3>

<p>フロント・マターが終わったと解釈すると、次に <a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a> の解釈に移るが、この時も先頭の（つまり、
フロント・マターと<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>形式の本文との間の）空白行は無視される。空白行が連続していたら、
そのすべてが無視される。</p>

<p>空白行を読み飛ばし、最初に現れた行の先頭にシャープ文字があろうが無かろうが、その行は
記事のタイトルを表すと解釈され、強制的にh2タグに囲まれる。</p>

<p>最初の１行をシャープ記号２つで始めた場合は、明示的にh2すなわち記事タイトルを指定したと
解釈して、本文は２行目以降である。</p>

<p>最初の１行にシャープ記号を付けなかった場合、それは本文の始まりだが、解釈器が勝手に
記事タイトルにした、というス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC">トー</a>リーを作った。
つまり最初の１行はタイトルでもあり本文でもある。重複する。</p>

<h3><a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a> は、sectionタグを使った入れ子構造としてHTML化される</h3>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a> は sectionタグを使った入れ子構造としてHTML化される。<br/>
h1~h6タグがセクションとセクションを切り分けるセパレータとして利用される。<br/>
また h に続く数字はセクションの階層を表すのに使われる。<br/>
すなわち、h3タグで始まるセクションを読み込んでいて h4タグに出会うと、解釈器は一つ下の子ノードが
始まったと解釈する。逆に h4で始まるセクションを解釈していて h3 が現れた場合は、そのセクションが
終わって１つ上の第３階層のノードが始まったという事である。
h3 で始まるセクションを読み込んでいて再び h3 に出会えば、それは同じ階層の新しいノードが
始まったという事である。</p>

<h3>本文中に h1タグは使えない</h3>

<p>h1タグは、ページタイトル「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%C4%CD%D5%C2%E6">青葉台</a>旭のノートブック」を表示するのに使うため、記事本体では使えない。
また、h2タグは記事のタイトル（この記事で言えば「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%C4%CD%D5%C2%E6">青葉台</a>旭の投稿用<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>亜種の仕様」の部分）
に使うので、記事本体には使えない。</p>

<h3>以上が、おおまかな独自<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>の仕様である</h3>

<p>Jekyll などの静的サイト・ジェネレータは、主にフロント・マター付きの <a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a> で書いてそれを
元にHTMLを生成する。そのとき、投稿日などの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%BF%A5%C7%A1%BC%A5%BF">メタデータ</a>の記述にフロント・マターが使われるが、
この部分をなるべく軽くしたいと考えた。</p>

<p>フロント・マターは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/yaml">yaml</a>など何らかの汎用データ言語で記述されることが多いが、日付など
必ず書かなければいけない決まり切った記述にも、「date:」などデータ識別用のキーワードを
書かなければいけない。しかし、ホームページに表示する記事専用と割り切ってしまえば、
yyyy-mm-dd 形式の記述があれば、これは投稿日を表しているなと決めつけても良い気がする。
投稿時間、タグのリストなども同様だ。そうすればデータ識別キーワードは必要なくなる。</p>

<p>また、「&mdash;」で表される仕切り線も、フロント・マターに決まりきった事しか書かないのであれば
必要ない。日付、時間、タグ配列などの決まりきった書式以外の行が出てきたら、問答無用で
本文が始まったと決めつければ良い。</p>

<p>またタイトル記述も出来るだけ軽くしたい。「title: ……」と書くのも面倒な場合がある。そもそも
タイトルを書くことさえ面倒な事もある。そこで、本文の最初の１行が必ずタイトルになるようにした。</p>

<p>それと、<a class="keyword" href="http://d.hatena.ne.jp/keyword/github">github</a>-pages はサーバーにテキストをアップロードすると同時に、出来るかぎり
「jekyll式フロント・マター付き<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>」として解釈しようとするようだ。  <br/>
省略の多い「独自フロント・マター」を記述すると、解釈エラーが起きてpushが停止してしまう。<br/>
ファイルの拡張子が「.md」ではなく「.txt」であっても、たとえば最初の行がハイフン三つによる
仕切りだったりと jekyll形式と少しでも近い<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>で書くと、やはり解釈が始まってしまうようだ。<br/>
そこで、いっそのこと仕切り線は使わないでおこうと思った。</p>

<h3>静的サイト・ジェネレーターにおいては、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>文書は下書の役目しかないが……</h3>

<p>多くの静的サイト・ジェネレーターにとっての最終目的はHTML文書で出力することだ。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>文書は下書に使うものでしかない。</p>

<p>しかし、せっかく<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>で書かれたものを公開しないというのも、何だかもったいない。<br/>
あるいはサーバー上には置いてあるのに、リンクも張られずに押入れの奥で眠る下書ノート
のような扱いになっているのもちょっと寂しい。</p>

<p>それで、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Markdown">Markdown</a>にも専用のindex.htmlを作って（見づらくはあるが）ブラウザで開けるようにした。
ただし平のテキストゆえ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%F3%A5%B3%A1%BC%A5%C9">エンコード</a>はブラウザ側で自動判断してもらうしかない。
文字化けする可能性が大きい。</p>

<p>それでも、トップページ「 <a href="http://aobadaiakira.jp/">aobadaiakira.jp</a> 」からたどりつけるようにしておいた。
まあ、自己満足だ。</p>
</div>

<!-- 投稿日時 -->
<div class="datetime">
  <span class="date">2017-04-10</span>
  <span class="time"> 11:31</span>
</div>

<!-- カテゴリー -->
<div class="category_list">
  <span class="category">[<a href="../category/hatena_blog_2017.html">はてなブログ2017</a> <a href="../category/year_2017.html">2017年</a>]</span>
</div>

</article>

</div>
<!-- ========== content end ========== -->

<footer>
  <div class="auther_in_footer">
    作者 <span class="author">青葉台旭</span>
  </div>
  <div class="button_in_footer">
    <a href="p20170411_083713.html">&lt;&lt;前</a>|<a href="../index.html">上へ</a>|<a href="p20170410_112743.html">次&gt;&gt;</a>
  </div>
</footer>

</div> <!-- div.base_container end-->
</div> <!-- div.base_sheet end-->

</body>
</html>