<!DOCTYPE html>
<html lang="ja">

<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>フロント・マターじゃダメなんだ | 青葉台旭のノートブック</title>
<link rel="stylesheet" type="text/css"  href="entry.css">
<link rel="icon"       type="image/png" href="./favicon.png">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67878421-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-67878421-6');
</script>
</head>

<!-- ====================================================================== -->

<!-- ===== body ===== -->
<body>
<div class="base_sheet">
<div class="base_container">

<!-- ===== header ===== -->
<header>
  <div class="h1_and_button">
    <div class="button_in_header">
      <a href="p2017_1206.html">&lt;&lt;前</a>|<a href="../index.html">上へ</a>|<a href="p2017_1204.html">次&gt;&gt;</a>
    </div>
    <h1>青葉台旭のノートブック</h1>
  </div>
</header>

<!-- ========== content ========== -->
<div class="content">

<!-- ===== 記事 ===== -->
<article class="entry">

<!-- 記事タイトル -->
<h2>フロント・マターじゃダメなんだ</h2>

<!-- 記事本文 -->
<div class="main_text">

<p>私は、自身のサイト<a href="http://aobadaiakira.jp" title="青葉台旭のホームページ">aobadaiakira.jp</a>
を自分で作った静的サイト・ジェネレータ（SSG）で生成している。</p>

<p>しばらくはそれを使って自分で書いた文章を自分で作ったSSGでHTMLに変換し、
自身のサイトで公開していたのだが、だんだん不満が募ってきてしまった。</p>

<section>
<h3>思いついたら直ぐに書く</h3>


<p>２０世紀の偉大な数学者たちは、喫茶店だろうがレストランだろうが、とにかくフッと思いついた数式の解
や法則を直ぐにその場でメモしたという。
メモ用紙が無ければ領収書の裏にでもどこにでも、とにかく忘れないように直ぐにメモをとる。</p>

<p>古代ギリシャの数学者アルキメデスも、風呂場で体積と重さの関係に気づい瞬間「エウレカ」と叫んで、
そのまま裸で街へ飛び出し王宮へ走ったというではないか。</p>

<p>つまり、それだけ「思いついたら瞬時に書く」というのは大事なことなのだ。</p>
</section>

<section>
<h3>多くのSSGでは、本文よりまず先にメタ情報を書かなければいけない</h3>


<p>ちなみに、メタ情報というのは、記事の本文以外に書かなければいけない情報、例えば
「記事を投稿した日」や「記事のタイトル」や「記事のカテゴリー・タグ」などのことだ。</p>

<p>多くの静的サイト・ジェネレータ（SSG）は、原稿にまずこのメタ情報を記述しなければいけない
仕様になっていて、その部分を「フロント・マター」という。</p>

<p>つまり「本当に書きたい事＝本文」を書く前に、その文章のタイトルを決め、パソコンの時計をみて日付
と時間を記入し、その記事がどのカテゴリーに分類されるかを考えて記入しなくてはいけない。</p>

<p>本文の内容とは別の、書かなければいけない事、考えなければいけない事が
「思いついたらサッと（本文を）書く」という勢いを阻害してしまう。</p>

<p>「この記事は、どのカテゴリーかな」などと考えているうちに、本文を書く気持ちが萎えてしまう。</p>
</section>

<section>
<h3>例</h3>


<p>以下のリンクを押して、記事を見て欲しい。<br /></p>

<p><a href="http://aobadaiakira.jp/notebook2/entry/p2017_1204.html">ビールのうた 青葉台旭のノートブック</a></p>

<p>自作の新しいSSGでマークダウン原稿から変換した記事だ。</p>

<p>リンク先には、以下のような内容が記述されている。</p>

<p>
<blockquote>

  <!-- 記事タイトル -->
  <p>「ビールのうた」（記事タイトル）</p>

  <!-- 本文 -->
  <p>
    ビール飲んだらゲップップ<br />
    炭酸しゅわしゅわゲップップ<br />
    酔いが回ってワッハッハ<br />
    つまみをガツガツ食べましょー<br />
    「ビールもう一杯行くか」<br />
    「ピンポーン」<br />
    「はーい」<br />
    「中ジョッキもう一杯！」<br />
    だんだん眠くなりました。<br />
    「そろそろ帰るか」<br />
    「あ、すいません、レシートください。ダイエットしてるんで」<br />
    （レシート見ながら）「今日はちょっと飲みすぎちゃったなー」<br />
    店を出たら、初雪が降っていました。
  </p>

  <!-- 投稿日時・カテゴリー -->
  <p style="text-align: right;">
    2017-12-04 09:08<br />
    詩 特に意味なし 2017年<br />
    作者：青葉台旭
  </p>
</blockquote>
</p>

<p>この記事には、記事本文の他に「ビールのうた」というタイトルがあり、また、フッターとして
「2017-12-04 09:08」という投稿日時が記述され、<br />
「詩 特に意味なし 2017年」というカテゴリー・タグが列挙され、<br />
最後に、「青葉台旭」という作者名が記述されている。</p>

<p>作者名に関しては、多くの場合１つのサイトの作者（＝SSGのユーザー）は１人なので、
ユーザーのホームディレクトリに設定ファイルを置いてその中に記述しておけば良い。
従ってこの記事では注目しない。</p>

<p>問題は、タイトルや投稿日時、カテゴリーなどのメタ情報だ。</p>

<p>当然これらのメタ情報は記事ごとに違うので、毎回毎回いちいち記述しなければいけない。</p>

<p>「本当に書きたい事＝本文」にとりかかる前に、だ。</p>
</section>

<section>
<h3>一般的な静的サイト・ジェネレータ（SSG）での記述</h3>


<p>一般的な静的サイト・ジェネレータ（SSG）では以下のように記事を書くと思う。<br />
私が最初に作ったSSGバージョン１も、だいたい以下のような書式で記事を書くように作った。</p>

<p>
<blockquote>
  title: ビールのうた<br />
  status: publish<br />
  date: 2017-12-04<br />
  time: 09:08<br />
  category: 詩 特に意味なし 2017年<br />
  ---<br />
  ビール飲んだらゲップップ<br />
  炭酸しゅわしゅわゲップップ<br />
  酔いが回ってワッハッハ<br />
  つまみをガツガツ食べましょー<br />
  「ビールもう一杯行くか」<br />
  「ピンポーン」<br />
  「はーい」<br />
  「中ジョッキもう一杯！」<br />
  だんだん眠くなりました。<br />
  「そろそろ帰るか」<br />
  「あ、すいません、レシートください。ダイエットしてるんで」<br />
  （レシート見ながら）「今日はちょっと飲みすぎちゃったなー」<br />
  店を出たら、初雪が降っていました。
</blockquote>
</p>

<p>６行目にハイフン3つだけの行「—」があり、これを区切り行として、それより上が「フロント・マター」
それより下が本文になっている。</p>

<p>この文章をテキストファイルに保存して、一般的なSSGに読ませると、まずSSGはこの区切り行「—」
で文章を２つに分け、区切り行より上を「フロント・マター」、区切り行より下を「本文」と解釈する。</p>

<p>そして、フロント・マターを解釈してタイトル、投稿日時、カテゴリーなどのメタ情報を記憶し、
本文と合わせてHTMLページを生成する。</p>

<p>ちなみに「status: publish」というのは、これが下書きなのか、それとも公開して良い最終稿なのかを
SSGに知らせるメタ情報だ。「publish」なら公開して良い最終稿、「draft」ならまだ下書きだから
公開してはいけない、という情報をSSGに知らせるためのものだ。</p>
</section>

<section>
<h3>これらメタ情報が文章の頭に記述されている理由の１つが「区切り行」の存在だ</h3>


<ol>
  <li>フロント・マターは厳密な文法を持ったデータ記述言語でありコンピュータが論理構造を把握しやすい
書式になっている。</li>
  <li>記事本文は日本語つまり自然言語であり、コンピュータは論理構造を把握できない場合が多い。</li>
</ol>

<p>つまり自然言語で書かれた記事本文はどんな記述も許されているのが普通で、人間である著者が
コンピュータとは別の意図で「—」という文字列を文中に含めてしまう可能性がゼロではない。<br />
それを文章の最初に持ってくると、書き手の意図とコンピュータの解釈が違ってしまう可能性がある。</p>

<p>厳密に文法が決められているデータ記述言語が先に書かれていれば、文章の書き手（＝人間）と
SSG（＝コンピュータ）が「—」という文字列に別の意味を与えることが無いので、
「メタ情報」と「本文」の切り分け段階で解釈エラーが起きない。</p>
</section>

<section>
<h3>しかし、それでも「書きたい時に」「すぐに」「最初から」記事本文を書きたい</h3>


<p>メタ情報なんて、後から書けば良い。<br />
投稿日時なんて、文章を書いた後でないと決定できないだろ。<br />
カテゴリー・タグを決めるの面倒くさい。そんなものあとで決めれば良いだろ。</p>
</section>

<section>
<h3>例その２。新しいSSGの書式（仮にテール・マターとでも名付けよう）</h3>


<p>だから私は、新しいSSG（バージョン２）を作るにあたって、以下のような書式で記事を書き、
それをSSGに解釈させるようにした。</p>

<p>
<blockquote>
  ## ビールのうた<br />
  <br />
  ビール飲んだらゲップップ<br />
  炭酸しゅわしゅわゲップップ<br />
  酔いが回ってワッハッハ<br />
  つまみをガツガツ食べましょー<br />
  「ビールもう一杯行くか」<br />
  「ピンポーン」<br />
  「はーい」<br />
  「中ジョッキもう一杯！」<br />
  だんだん眠くなりました。<br />
  「そろそろ帰るか」<br />
  「あ、すいません、レシートください。ダイエットしてるんで」<br />
  （レシート見ながら）「今日はちょっと飲みすぎちゃったなー」<br />
  店を出たら、初雪が降っていました。<br />
  <br />
  ___Aobadai Akira___<br />
  date: 2017-12-4<br />
  time: 9:08<br />
  category: 特に意味なし 詩<br />
</blockquote>
</p>

<p>ご覧のように、メタ情報の記述部分が、文章の初めではなく、文章の最後にある。</p>

<p>仮に、この書式を<strong>テール・マター</strong>と名付けよう。</p>
</section>

<section>
<h3>記事本文とテール・マターとの境目</h3>


<p>区切り行は「___Aobadai Akira___」であり、もちろんこの部分はユーザーが設定ファイルを
書き換えることで任意の文字列にできる。</p>

<p>要は「—」などという単純な文字列ではなく、記事本文の中にも出現しそうにないユニークなもので、
かつ記事の著者が覚えやすい文字列をユーザー側で指定できるということだ。</p>

<p>そして、そのあとに、フロント・マターと同じようにデータ記述言語でメタ情報を書いていく。</p>

<p>ご覧のように、</p>

<ol>
  <li>タイトル情報が無い</li>
  <li>このファイルが「最終稿」なのか、「下書き」なのか、を表す「status: ……」の記述が無い</li>
</ol>

<section>
<h4>１行目が自動的にタイトルになる</h4>


<p>別にタイトルなんて考えなくたって、記事本文を１行目から書き始めれば良い。<br />
だいたい、その１行目に一番大事なことを書くのが人間という生き物だ。それをタイトルにしちゃえば良い。</p>

<p>もちろん、それは本文の一部でもあるので、本文にもちゃんと含める。<br />
つまり、タイトルと本文の１行目が重複した形でHTMLが生成される。<br />
それが嫌な場合は１行目の頭にシャープ記号を付ければ良い。</p>

<p>markdownでは、頭にシャープ記号が付いた行はタイトルを表す。</p>

<p>一方で、私の自作SSGは、シャープ記号が頭に付いた行が１行目だった場合、それはタイトルを明示した行で
あると解釈して、本文に含めずにHTMLを生成する。</p>
</section>

<section>
<h4>最終稿か、下書きであるか、は、テール・マターの有無で決める</h4>


<p>メタ情報なんて、原稿が完成してから決めれば良いんだ。</p>

<p>逆に言えば、メタ情報の無い記事本文だけのファイルは自動的に「下書き」と見なせば良いんだ。</p>
</section>
</section>

<section>
<h3>最後に。思わぬ副作用（良い意味で）</h3>


<p>もう一度、上のフロント・マターの記述例とテール・マターの記述例とを見比べて欲しい。</p>

<p>フロント・マターが「いかにもコンピュータのために記述しました」的な硬さがあるのに対し、
テール・マターの記述は、自然言語における「署名」のように見えないだろうか。</p>

<p>つまり、テール・マターを書くことそれ自体が署名を書くことにもなる、という一石二鳥だ。</p>
</section>

</div>

<!-- 投稿日時 -->
<div class="datetime">
  <span class="date">2017-12-04</span>
  <span class="time"> 12:16</span>
</div>

<!-- カテゴリー -->
<div class="category_list">
  <span class="category">[<a href="../category/about_my_website.html">青葉台旭のウェブサイトについて</a> <a href="../category/program.html">プログラム</a> <a href="../category/year_2017.html">2017年</a>]</span>
</div>

</article>

</div>
<!-- ========== content end ========== -->

<footer>
  <div class="auther_in_footer">
    作者 <span class="author">青葉台旭</span>
  </div>
  <div class="button_in_footer">
    <a href="p2017_1206.html">&lt;&lt;前</a>|<a href="../index.html">上へ</a>|<a href="p2017_1204.html">次&gt;&gt;</a>
  </div>
</footer>

</div> <!-- div.base_container end-->
</div> <!-- div.base_sheet end-->

</body>
</html>